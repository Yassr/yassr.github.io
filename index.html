<!DOCTYPE html>
<html>
<!-- This is my comment and this is my code - Yassr Shaar -->
	<head>
		<title>Yassr Shaar Image Processing Blog</title>
	</head>
	<!--  https://wordtohtml.net/  -->
    
	<link id="pagestyle" rel="stylesheet" type="text/css" href="Casual.css">

<!--JavaScript Command line starts here ############################## -->
<script type="text/javascript">
  
    //Function for displaying and hiding text
    function showme(id, linkid)
    {
    var divid = document.getElementById(id);
    var toggleLink = document.getElementById(linkid);
   
    if (divid.style.display == 'block')
        {
        toggleLink.innerHTML = "<button type='button'> Show Blog </button>";
        divid.style.display = 'none';
        }
    else
        {
        toggleLink.innerHTML = "<button type='button'> Hide Blog </button>";
        divid.style.display = 'block';
        }
    }         
    
    
    
</script>
<!--JavaScript Command line Ends here ############################## -->
    
    
	<body>
		<div id ="DIT"><a href="https://www.dit.ie"> <img src="http://www.dit.ie/media/logo/DIT_logocol_reverse2013.png" width = "30%" > </a></div>
        
		<!-- Todays Time -->
    <p class="todaydate"><span id="dtext"></span></p>
      
    <div class="slider">
	<input type="radio" name="slide_switch" id="id1"  checked="checked"/>
	<label for="id1">
		<img src="team.jpg" width="100"/>
	</label>
	<img src="team.jpg"/>
	
	<!--Lets show the second image by default on page load-->
	<input type="radio" name="slide_switch" id="id2"/>
	<label for="id2">
		<img src="project.jpg" width="100"/>
	</label>
	<img src="project.jpg"/>
	
	<input type="radio" name="slide_switch" id="id3"/>
	<label for="id3">
		<img src="result1s.jpg" width="100"/>
	</label>
	<img src="result1s.jpg"/>
    </div>
        
    <script src="http://thecodeplayer.com/uploads/js/prefixfree.js" type="text/javascript"></script>
	
        
		<div id ="title" > Yassr Shaar</br><span class="rainbow"> Team Colours</span>
          <font size ="6px">  <ul>
                <li style="-webkit-text-stroke-width: 0.4px;-webkit-text-stroke-color: black;">Contact Details:</li>
					<ol style="-webkit-text-stroke-width: 0.4px;-webkit-text-stroke-color: black;">
                        <li><span class="rainbow">C14328571@mydit.ie</span></li>
						<li><a href ="https://www.linkedin.com/in/YassrShaar" style="text-decoration:none"><span class="rainbow">https://www.linkedin.com/in/YassrShaar</span></a></li>
                </ol>
            </ul></font>
				
		</div>
		<div id ="cont">
		<h3><hr/>
		<a name="Table"> <b> Table of contents </b> </a> <br/>
		<a href=#blog1> Blog Post 1 - 10/09/2017 </a><br>
		<a href=#blog2> Blog Post 2 - 24/09/2017 </a> <br>
		<a href=#blog3> Blog Post 3 - 10/10/2017 </a> <br>
		<a href=#blog4> Blog Post 4 - 19/10/2017 </a> <br>
		<hr/></h3></div>
		

		<div id="blogs">
		<a  id="blog1" onclick="showme('blog1a', this.id);"> <font size="6">  Blog Post 1 - 10/09/2017 </font> <br> <button type="button">Show Blog</button></a> <br>
			<div  id ="blog1a" style="display:none"><font size="6">Blog Post 1 - 19/10/2017 </font><font size = "4">
			<br>This is the First blog. The team I am in is team Colours, With April, Robert and Connor</font></div>
		
		<a  id="blog2" onclick="showme('blog2a', this.id);"><font size="6">  Blog Post 2 - 24/09/2017 </font><br><button type="button">Show Blog</button></a> <br>
			<div  id ="blog2a" style="display:none"><font size="6">Blog Post 2 - 24/09/2017 </font><font size = "4">
			<p>Split :</p>
			<p>26/09/17</p>
			<p>April : Binary object detection</p>
			<p>Robert : GUI</p>
			<p>Yassr : Exploring Colour Range</p>
			<p>Connor : Identify Object in an image</p>
			<p>Currently what the team is working on is researching the different ways we will be approaching the Project and doing research on what we need to know to make it happen.<br />I am currently researching colour range and how that can be used. I learnt that the BGR colour&nbsp;spectrum might not be the best for this project and am now investigating using HSV&nbsp;and create better thresholds and making two lower and two upper thresh holds&nbsp;based on HSV.<br> <img src="blog2img.png"/></p</font></div>
		
		
		<a  id="blog3" onclick="showme('blog3a', this.id);"> <font size="6">  Blog Post 3 - 10/10/2017 </font><br><button type="button">Show Blog</button></a> <br>
			<div  id ="blog3a" style="display:none"><font size="6">Blog Post 3 - 19/10/2017 </font><font size = "4">
			<pre>A problem we ran into when doing multi colour&nbsp;thresholding was that the image we are working with the cups (objects) are too close and the detection was being thrown off and weird.&nbsp;<br /><br /></pre>
			<pre>boundaries = [ #BGR </pre>
			<pre>([198, 111, 255], [128, 4, 234]), #Magenta&nbsp; </pre>
			<pre>([86, 31, 4], [220, 88, 50]), </pre>
			<pre>([25, 146, 190], [62, 174, 250]), </pre>
			<pre>([103, 86, 65], [145, 133, 128]), </pre>
			<pre>([103, 86, 65], [145, 133, 128]), </pre>
			<pre>([103, 86, 65], [145, 133, 128])]<br /># loop over the boundaries</pre>
			<pre>for (lower, upper) in boundaries: # create NumPy arrays from the boundaries </pre>
			<pre>lower = np.array(lower, dtype = "uint8") </pre>
			<pre>upper = np.array(upper, dtype = "uint8")<br /># find the colors within the specified boundaries and apply&nbsp;the mask </pre>
			<pre>mask = cv2.inRange(image, lower, upper) </pre>
			<pre>output = cv2.bitwise_and(image, image, mask = mask)</pre>
			<p>We switched to binary thresholding and tried to detect the objects so that once the objects are detected we can try&nbsp;separate&nbsp;them&nbsp;and detect the colours.&nbsp;</p>
			<pre>G = cv2.cvtColor(I, cv2.COLOR_BGR2GRAY)<br />#Adaptive thresholding</pre>
			<pre>B = cv2.adaptiveThreshold(G, maxValue = 255, adaptiveMethod = cv2.ADAPTIVE_THRESH_GAUSSIAN_C, thresholdType = cv2.THRESH_BINARY, blockSize = 15, C = 7)<br />That didnt give the result we had hoped but we are currently trying the separate the objects</pre>
			<br><p>This week we tried to implement morphing&nbsp;and Erosion&nbsp;</p>
			<p>NewMask = cv2.erode(ROI,shape)</p>
			<p>NewMask = cv2.morphologyEx(B,cv2.MORPH_OPEN,shape</p><br>
			<img src="team.jpg"/></font></div>
			
			
		<a  id="blog4" onclick="showme('blog4a', this.id);"><font size="6">  Blog Post 4 - 19/10/2017 </font><br><button type="button">Show Blog</button></a> <br>
			<div  id ="blog4a" style="display:none"><font size="6">Blog Post 4 - 19/10/2017 </font><font size = "4">
			<<h4 class="referenceString selectable">References :</h4>
			<h4 class="referenceString selectable">Cmm.ensmp.fr. (2017).&nbsp;<em>The Watershed Transformation page</em>. [online] Available at: http://cmm.ensmp.fr/~beucher/wtshed.html [Accessed 19 Oct. 2017].</h4>
			<h4 class="referenceString selectable">Docs.opencv.org. (2017).&nbsp;<em>OpenCV: Image Segmentation with Watershed Algorithm</em>. [online] Available at: https://docs.opencv.org/3.1.0/d3/db4/tutorial_py_watershed.html [Accessed 19 Oct. 2017].</h4>
			<p>-----------------------------------------------------------------------------------------------------------------------------</p>
			<p>At first, I attempted&nbsp;to use&nbsp;Image Segmentation with Watershed Algorithm using HSV the result of that gave back an outline of the cups</p>
			<p><img src="result2.jpg" alt="" /></p>
			<p>Code :</p>
			<p># Creating a plain white image<br />WhiteImg = np.zeros(np.shape(img), np.uint8)<br />WhiteImg[:,:] = (255,255,255)</p>
			<p>HSV = cv2.cvtColor(img, cv2.COLOR_BGR2HSV)<br />G = cv2.cvtColor(HSV,cv2.COLOR_BGR2GRAY)</p>
			<p>ret, thresh = cv2.threshold(G,0,255,cv2.THRESH_BINARY_INV+cv2.THRESH_OTSU)</p>
			<p># noise removal<br />kernel = np.ones((3,3),np.uint8)<br />opening = cv2.morphologyEx(thresh,cv2.MORPH_OPEN,kernel, iterations = 2)</p>
			<p># sure background area<br />sure_bg = cv2.dilate(opening,kernel,iterations=3)</p>
			<p># Finding sure foreground area<br />dist_transform = cv2.distanceTransform(opening,cv2.DIST_L2,5)<br />ret, sure_fg = cv2.threshold(dist_transform,0.7*dist_transform.max(),255,0)<br /> <br /># Finding unknown region<br />sure_fg = np.uint8(sure_fg)<br />unknown = cv2.subtract(sure_bg,sure_fg)</p>
			<p>#Marker labelling<br />ret, markers = cv2.connectedComponents(sure_fg)</p>
			<p>#Add one to all labels so that sure background is not 0, but 1<br />markers = markers+1</p>
			<p># Now, mark the region of unknown with zero<br />markers[unknown==255] = 0</p>
			<p>markers = cv2.watershed(img,markers)<br />WhiteImg[markers == -1] = [255,0,0]</p>
			<p>cv2.imshow("watershed", WhiteImg)<br />key = cv2.waitKey(0)</p>
			<p>-----------------------------------------------------------------------------------------------------------------</p>
			<p>I then Attempted to use a Kernal and Applying the High Pass Filter. The result was that the cups came out looking much better isolated and retained some of their colour and so I'd like to experement with combining the two or looking more into kernals</p>
			<p>&nbsp;</p>
			<p><img src="result1.jpg" alt="" /></p>
			<p>Code:</p>
			<p># Using Kernal and Applying the High Pass Filter I was able to better isolate the cups<br />k = np.array([[-1,-1,-1], [-1,8,-1], [-1,-1,-1]],<br />dtype=float)<br />F = cv2.filter2D(img,ddepth=-1,kernel=k)</p>
			<p>cv2.imshow("Kernel", F)<br />key = cv2.waitKey(0)</p>
			</font></div>
		</div>
		
		<!-- Template Blog -->
		<!-- <a  id="blog4" onclick="showme('blog4a', this.id);"><font size="6">  Blog Post 4 - 19/10/2017 </font><br><button type="button">Show Blog</button></a> <br>
			<div  id ="blog4a" style="display:none"><font size="6">Blog Post 4 - 19/10/2017 </font><font size = "4">
			<br>Blog 4.</font></div>
		</div> -->
    
    <!--<div id= "table1"><table style="border-collapse:collapse;">
            <thead>
                <tr>
                    <th colspan="2" style=" color:red">Grades</th>
                </tr>
                <tr style="border-bottom:1px solid black;">
                    <th style="margin:5px;"><em>Module</em></th>
                    <th style="margin:5px;border-left:1px solid black;"><em>Percentage</em></th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="margin:5px;">Programming</td>
                    <td style="margin:5px;border-left:1px solid black;">89%</td>     
                </tr>
                
                <tr>
                    <td style="margin:5px;">Databases</td>
                    <td style="margin:5px;border-left:1px solid black;">81%</td>
                </tr>
                
                <tr>
                    <td style="margin:5px;">Networking</td>
                    <td style="margin:5px;border-left:1px solid black;">85%</td>
                </tr>
            </tbody>
        </table></div> -->    
    
   <!--JavaScript Command line Starts here ############################## -->
        <script>//Function to display date
        function updateClock() {
        var today = new Date();
        document.getElementById("dtext").innerHTML="Today's Date is : "+ today;
        setTimeout(updateClock, 3000);
        }
        updateClock();  
        </script>
    <!--JavaScript Command line Ends here ############################## --> 
    
    
    
    
</html>